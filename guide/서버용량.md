#### 서버 cctv 영상 자동 업로드 막기

```less
잠그기
chattr +i /mnt/sdb2/upload/101A
chattr +i /mnt/sdb2/upload

조회
lsattr -d /mnt/sdb2/upload/101A
lsattr -d /mnt/sdb2/upload

해제
chattr -i /mnt/sdb2/upload/101A
chattr -i /mnt/sdb2/upload
```

✅ chattr +i 의 의미
```less
+i (immutable) 속성을 주면:

디렉토리 안에 파일을 추가/삭제할 수 없음

디렉토리 이름 변경 불가

디렉토리 자체 삭제 불가

심지어 chmod, chown 등으로 권한이나 소유자 변경도 안 됨
```


🔒 예시로 확인해보기

```less
# 디렉토리에 immutable 속성 설정
chattr +i /mnt/sdb2/upload


# 이후 시도해볼 수 있는 것들
touch /mnt/sdb2/upload/test.txt    # 실패함 (Permission denied)
rm -rf /mnt/sdb2/upload/test.txt   # 실패함 (Permission denied)
chmod 777 /mnt/sdb2/upload         # 실패함 (Operation not permitted)
chown pi:pi /mnt/sdb2/upload       # 실패함 (Operation not permitted)
```

🔐 요약하면:

chattr +i는 권한을 바꾸는 게 아니라 디렉토리를 "잠가버리는" 거예요.

기존 권한은 그대로 유지돼요.

하지만 그 이후에 chmod, chown, 파일 생성/삭제 등은 막힘.

#### 캐시 삭제

```less
sudo rm -rf /var/cache/yum
```

#### etc 로그조회

```less
find /mnt/sdb2/upload/101A/2025-04-07 -type f -cmin -120 -exec ls -l {} \;

last -i | grep 'root'   

ls -l --time=ctime /mnt/sdb2/upload/101A/2025-04-07

#Nginx access로그
/var/log/nginx

awk '$4 >= "[07/Apr/2025:12:49:00" && $4 <= "[07/Apr/2025:12:51:00"' access.log

grep '\[07/Apr/2025:12:50' access.log
```




