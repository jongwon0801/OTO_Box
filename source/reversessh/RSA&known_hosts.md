#### 1. known_hosts와 SSH 접속

 **known_hosts**는 SSH 클라이언트가 서버에 연결할 때 **서버의 공개 키(호스트 키)** 를 기록하는 파일입니다.
- 이 파일은 클라이언트 측에 존재하며, 보안상의 이유로 서버의 신뢰성을 확인하는 데 사용됩니다.

- 처음 서버에 접속할 때 SSH 클라이언트는 해당 서버의 공개 키를 known_hosts 파일에 저장합니다.

예를 들어, 서버에 처음 접속할 때
```less
ssh user@server
```

```less
클라이언트는 서버의 공개 키를 known_hosts에 기록하려 시도합니다.
서버가 처음 접속한 클라이언트에게 키를 전달하고, 클라이언트는 이를 수락하거나 거부할 수 있습니다.

이때, SSH 클라이언트는 서버의 공개 키가 known_hosts에 없는 경우 경고 메시지를 표시하고
사용자가 "yes"를 입력하여 서버의 키를 저장하도록 합니다.
```

```less
The authenticity of host 'server (192.168.1.1)' can't be established.
RSA key fingerprint is SHA256:abcdef1234567890.
Are you sure you want to continue connecting (yes/no)?
```

이때 사용자가 yes를 입력하면 서버의 공개 키가 클라이언트의 ~/.ssh/known_hosts 파일에 추가됩니다.

#### known_hosts의 목적
```less
이후에는 서버에 접속할 때마다, 클라이언트는 서버의 공개 키가 known_hosts에 저장된 것과 비교합니다.

서버의 공개 키가 변할 경우, 경고 메시지가 표시되며, "hosts key verification failed" 오류가 발생할 수 있습니다.
이는 보안상의 이유로 서버가 변경되었거나 중간자가 공격을 시도할 가능성을 알리기 위한 것입니다.
```


#### 2. RSA 키 인증

- RSA 키 인증은 비밀번호 없이 서버에 접속하기 위한 암호화된 공개 키-비밀 키 쌍을 사용하는 방식입니다.

- RSA 키 쌍 : 클라이언트 측에서는 개인 키(private key)와 공개 키(public key)가 쌍으로 존재합니다.

서버 측에서는 클라이언트의 공개 키를 ~/.ssh/authorized_keys 파일에 저장하여,
클라이언트가 서버에 접속할 때 클라이언트의 개인 키와 서버의 공개 키를 비교하여 인증을 시도합니다.

#### RSA 키 인증 과정:
```less
1. 클라이언트가 서버에 접속을 시도하면, 서버는 클라이언트의 공개 키가 authorized_keys 파일에 등록되어 있는지 확인합니다.

2. 클라이언트는 서버에 등록된 공개 키에 맞는 비밀 키를 사용하여 인증을 시도합니다.

3. 인증이 성공하면, 비밀번호를 묻지 않고 서버에 접속할 수 있습니다.
```

#### RSA 키 인증의 목적:
```less
비밀번호 없이 접속하기 위해 공개 키-비밀 키 쌍을 사용하여 인증을 합니다.

~/.ssh/authorized_keys 파일에 클라이언트의 공개 키가 등록되어 있어야 하며, 클라이언트는 해당 서버에 접속할 때 비밀번호를 입력하지 않고 자동으로 인증됩니다.
```


#### 두 가지를 함께 사용하는 경우
```less
RSA 키 인증을 사용하면 비밀번호 없이 SSH로 접속할 수 있습니다. 이때 known_hosts는 서버의 공개 키를 확인하는 역할을 합니다.

known_hosts 파일은 주로 서버가 신뢰할 수 있는 서버인지 확인하는데 사용되며, RSA 키 인증과는 별개의 기능이지만 두 가지가 함께 작동하여 보안을 강화합니다.

결론: known_hosts는 서버의 공개 키를 확인하고 저장하는 용도이고, RSA 키 인증은 비밀번호 없이 접속할 수 있도록 하는 방식입니다. 두 개는 서로 보완적인 역할을 합니다.
```

참고
```less
호스트 키 인증을 생략하더라도 RSA 키 인증을 사용하여 비밀번호 없이 로그인할 수 있습니다.

StrictHostKeyChecking=no 옵션을 사용하면 호스트 키를 확인하지 않고도 RSA 키 인증을 통해 로그인할 수 있습니다.
```
















