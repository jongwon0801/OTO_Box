
#### 원격접속
ssh -p 2222 root@smart.apple-box.kr

pw : tmshdnxmfl (스노우트리)

---
#### 1. 오피스텔 모델 (서버를 통한 접속)
오피스텔에 있는 장치(컴퓨터 또는 라즈베리 파이)는 서버를 거쳐서 원격 접속하도록 구성됩니다.

#### 구성 요소

서버 (공인 IP 보유)

원격 제어 대상 (오피스텔의 라즈베리 파이 또는 컴퓨터)

회사 컴퓨터 (원격 제어하는 장치)

#### 동작 방식
Reverse SSH 설정

오피스텔 장치는 공인 IP가 없기 때문에, 서버로 SSH 역방향 터널링(reverse SSH)을 설정하여 접속할 수 있도록 함.

오피스텔 장치에서 서버로 SSH 연결을 유지하면서 포트 포워딩 설정.

회사 컴퓨터에서 서버를 통해 접속

회사 컴퓨터는 공인 IP를 가진 서버에 접속한 후, Reverse SSH 터널을 통해 오피스텔 장치에 접근.



---
#### 2. 아파트 모델 (VPN을 이용한 접속)
아파트에 있는 장치(라즈베리 파이)에는 SoftEther VPN을 설치하여 원격 접속을 가능하게 함.

#### 구성 요소

라즈베리 파이 (SoftEther VPN 설치)

VPN 네트워크

회사 컴퓨터 (VPN을 통해 원격 접속)

#### 동작 방식
SoftEther VPN 서버 실행 (라즈베리 파이에서)

SoftEther VPN을 라즈베리 파이에 설치하여 VPN 접속을 허용.

회사 컴퓨터에서 VPN 연결

네이버 보관함 서버를 통해 VPN에 접속하여 라즈베리 파이의 내부 네트워크에 접근 가능.

---

#### 오피스텔 모델

- 서버가 공인 IP를 가지고 있어야 하며, Reverse SSH 방식으로 접속.
- 오피스텔 장치에서 서버로 SSH 터널을 유지하고, 회사 컴퓨터는 서버를 통해 접속.

#### 아파트 모델

- 공인 IP가 없으므로 SoftEther VPN을 이용하여 내부 네트워크에 접속.
- 회사 컴퓨터는 VPN에 접속한 후, 라즈베리 파이에 직접 SSH 접속.
- 이렇게 설정하면 회사에서 두 모델 모두 안정적으로 원격 제어할 수 있습니다. 

---


#### SoftEther VPN과 라우트 설정을 통한 네트워크 구성

#### SoftEther VPN 설치 및 설정
```
네이버 서버(공인 IP) → SoftEther VPN 서버 역할

라즈베리 파이(아파트) → SoftEther VPN 클라이언트 역할

회사 컴퓨터 → SoftEther VPN 클라이언트 역할
```

#### 라우트(Route) 설정을 통해 네이버 서버와 라즈베리 파이는 항상 연결 유지

- 라즈베리 파이가 VPN 클라이언트로 네이버 서버에 접속
- VPN을 통해 항상 연결된 상태 유지 (VPN 터널 지속)
- 라즈베리 파이는 VPN을 통해 네이버 서버의 가상 네트워크에 포함됨
- 회사에서 VPN 접속하면 네이버 서버를 거쳐 라즈베리 파이에 접근 가능

---
#### 네트워크 흐름

1️⃣ 라즈베리 파이 → 네이버 서버 (VPN 서버) 연결 유지

SoftEther VPN 클라이언트가 실행되면 네이버 서버에 자동으로 접속
VPN 내부 IP 할당(예: 10.8.0.2)
항상 통신 가능한 상태 유지

2️⃣ 회사 컴퓨터 → 네이버 서버(VPN 서버) 접속

회사 컴퓨터도 VPN 연결하여 네이버 서버의 내부 네트워크에 포함
VPN 내부 IP 할당(예: 10.8.0.3)

3️⃣ 회사 컴퓨터 → 라즈베리 파이 접근 가능

- 회사 컴퓨터는 라우트 설정을 통해 라즈베리 파이에 직접 접근 가능
- ssh user@10.8.0.2 로 라즈베리 파이에 연결 가능
---
#### 항상 통신이 유지되는 이유

✅ SoftEther VPN의 "SecureNAT" 또는 "Local Bridge" 설정을 통해 VPN 터널 유지

✅ 라우트 설정을 통해 네이버 서버(VPN 서버)와 라즈베리 파이 간 네트워크 지속 연결

✅ VPN 클라이언트(라즈베리 파이)가 VPN 서버에 지속적으로 연결되어 내부 네트워크처럼 동작

